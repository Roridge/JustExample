package com.flowmellow.justexample.activities;

import android.location.Location;
import android.os.Bundle;

import com.flowmellow.justexample.LocationUtil;
import com.flowmellow.justexample.activities.HomeActivity;
import com.google.android.gms.location.LocationClient;

public class MockHomeActivity extends HomeActivity {
	
	private boolean isGPSProviderDisabled = true;
	private boolean readyToIntercept = false;
	private LocationClient locationClient;
	private Location location;
	
	public void isGPSProviderDisabled(boolean disabled) {
		isGPSProviderDisabled = disabled;
		readyToIntercept = true;
	}
	
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
	}
	
	/**
	 * get the location client
	 */
	@Override
	protected LocationClient createLocationClient() {
		locationClient = super.createLocationClient();
		return locationClient;
	}

	/**
	 * set a mock location
	 */
	@Override
	public void onConnected(Bundle bundle) {
		super.onConnected(bundle);
		location = LocationUtil.createLocation();
		locationClient.setMockMode(true);
		locationClient.setMockLocation(location);
	}

	@Override
	protected boolean isGPSProviderDisabled() {
		return isGPSProviderDisabled;
	}
	
}
