package com.flowmellow.justexample.activities;

import java.util.ArrayList;
import java.util.List;

import com.flowmellow.justexample.activities.listeners.RestaurantListener;
import com.flowmellow.justexample.activities.to.RestaurantTO;
import com.flowmellow.justexample.services.RestaurantService.RestaurantBinder;

import android.content.ComponentName;
import android.content.ServiceConnection;
import android.os.IBinder;

public class MockRestaurantsActivity extends RestaurantsActivity {

	@Override
	protected ServiceConnection getServiceConnection() {
		ServiceConnection serviceConnection = super.getServiceConnection();
		return new MockRestaurantServiceConnection(serviceConnection);
	}
	
	private class MockRestaurantServiceConnection implements ServiceConnection {
		
		private ServiceConnection realServiceConnection;
		
		public MockRestaurantServiceConnection(ServiceConnection serviceConnection) {
			this.realServiceConnection = serviceConnection;
		}

		@Override
		public void onServiceConnected(ComponentName className, IBinder service) {
			realServiceConnection.onServiceConnected(className, service);
			List<RestaurantTO> restaurants = getMockRestaurants();
			displayRestaurants(restaurants);
		}

		@Override
		public void onServiceDisconnected(ComponentName componentName) {
			realServiceConnection.onServiceDisconnected(componentName);
		}
	}
	
	
	@Override
	public void displayRestaurants(List<RestaurantTO> restaurants) {
		super.displayRestaurants(restaurants);
	}

	private List<RestaurantTO> getMockRestaurants() {
		/*
		 *When sorted in order of star rating the order will be  
		 */
		List<RestaurantTO> restaurants = new ArrayList<RestaurantTO>();
		restaurants.add(new RestaurantTO("1", "Restaurant1", 0.5F));
		restaurants.add(new RestaurantTO("7", "Restaurant2", 4.5F));
		restaurants.add(new RestaurantTO("3", "Restaurant3", 5.5F));
		restaurants.add(new RestaurantTO("4", "Restaurant4", 2.5F));
		restaurants.add(new RestaurantTO("6", "Restaurant5", 4.0F));
		restaurants.add(new RestaurantTO("2", "Restaurant6", 1.0F));
		restaurants.add(new RestaurantTO("3", "Restaurant7", 2.0F));
		restaurants.add(new RestaurantTO("5", "Restaurant8", 3.0F));
		return restaurants;
	}
	
}
